<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Your New Year 2026 Gift</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- ===== Custom OG Preview ===== -->
  <meta property="og:title" content="Happy New Year 2026 ğŸ‰" />
  <meta property="og:description" content="Someone sent you a special New Year gift! Open to reveal your surprise." />
  <meta property="og:image" content="https://happy-new-year-2026-seven.vercel.app/icons/og.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" id="ogUrlTag" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0a0530" />
  <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32.png" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">

</head>

<body class="celebrate-body">
  <div id="loader" class="loader-overlay">
    <div class="loader-inner">
      <div class="loader-ring"></div>
      <div class="loader-text">Loading your New Year giftâ€¦</div>
    </div>
  </div>

  <canvas id="celebrateCanvas"></canvas>
  <div id="fireworks-container"></div>

  <div class="overlay"></div>

  <header class="top-bar fade-in" fade-in>
    <div class="nav-left">
      <img src="icons/logo.png" alt="Site Logo" class="site-logo">

      <!-- <div class="logo-text" id="brandTitle" >NY2026</div> -->
    </div>

    <button id="soundToggle" class="sound-btn" style="background-color: rgb(234, 255, 0); color: black;">ğŸ”Š Sound
      On</button>
    <button id="themeToggle" class="theme-btn">â˜€ï¸</button>
    <a href="history.html" class="top-link">My GiftsğŸ</a>

    <a href="create.html" class="top-link">Create a GiftğŸ</a>
  </header>

  <main class="container one-column fade-in" fade-in>
    <section class="card celebration-card">
      <div class="celebration-content">
        <h2 id="headline" class="neon-title">Happy New Year 2026!</h2>
        <h3 id="senderLine" class="neon-subtitle"></h3>

        <div class="gift-wrapper">
          <div class="gift-box fade-scale" id="giftBox" fade-scale>
            <div class="gift-lid"></div>
            <div class="gift-body"></div>
            <div class="gift-ribbon-vertical"></div>
            <div class="gift-ribbon-horizontal"></div>
            <span class="gift-text" id="giftText">Tap to Open</span>
          </div>
        </div>

        <div class="balloon-area" id="balloonArea"></div>

        <div id="revealBlock" class="reveal-block" style="opacity:0; pointer-events:none; transform: translateY(20px);">
          <div class="photo-badge-wrapper">
            <div class="photo-circle" id="photoCircle">
              <img id="friendPhotoDisplay" alt="Friend Photo" style="display:none;" />
              <div class="photo-fallback" id="photoFallback" style="display:none;">ğŸ‰</div>
            </div>
          </div>
          <h3 id="receiverNameTitle" class="receiver-name"></h3>
          <p id="wishText" class="wish-text"></p>
        </div>

        <div class="after-gift-actions" id="afterGiftActions" style="opacity:0; pointer-events:none;">
          <button class="btn primary fade-in" id="shareForwardBtn" fade-in>
            ğŸ Create a Gift for Someone Else
          </button>
        </div>
      </div>
    </section>
    <!-- === REACTION SYSTEM === -->
    <section class="card" style="margin-top:20px;">
      <h3>React to this Gift</h3>

      <div id="reaction-buttons" style="margin-top:10px;">
        <button class="react-btn" data-type="heart">â¤ï¸</button>
        <button class="react-btn" data-type="laugh">ğŸ˜‚</button>
        <button class="react-btn" data-type="wow">ğŸ˜®</button>
        <button class="react-btn" data-type="party">ğŸ‰</button>
      </div>

      <div id="reaction-counts" style="margin-top:12px; font-size:1.1rem; font-weight:700;"></div>
    </section>

  </main>

 
  <!-- ========== REVIEW & RATING SECTION ========== -->
  <section class="card" id="ratingReviewCard" style="margin-top:20px;">
    <h3>Rate & Review This Gift</h3>

    <!-- Rating Stars -->
    <div id="ratingStars">
      <span class="star" data-value="1">â˜†</span>
      <span class="star" data-value="2">â˜†</span>
      <span class="star" data-value="3">â˜†</span>
      <span class="star" data-value="4">â˜†</span>
      <span class="star" data-value="5">â˜†</span>
    </div>


    <!-- Review Input -->
    <textarea id="reviewText" rows="3" placeholder="Write your review..."
      style="width:100%; margin-top:10px; padding:10px; border-radius:8px;"></textarea>

    <!-- Submit/Delete Buttons -->
    <div style="display:flex; gap:10px; margin-top:10px;">
      <button class="btn primary" id="submitReviewBtn">Submit</button>
      <button class="btn danger-btn" id="deleteReviewBtn" style="display:none;">Delete My Review</button>
    </div>

    <hr style="margin:20px 0;">

    <!-- Average Rating -->
    <h4>Average Rating: <span id="avgRating">â€”</span> â˜…</h4>

    <!-- All Reviews -->
    <div id="allReviews"></div>
  </section>
  <div id="createGiftWrapper">
    <button id="createGiftBubble" class="floating-bubble">
      <img src="icons/gift-box.png" class="bubble-icon">
    </button>
    <div class="bubble-label">Create Gift</div>
  </div>

 <section class="card slide-up" id="leaderboard-card" slide-up>
    <h3>ğŸ† Global Leaderboard</h3>
    <ul id="leaderboard-list" style="list-style:none; padding:0; margin:10px 0 0 0;"></ul>
    <div id="your-rank"></div>
  </section>

  <!-- INSTALL APP â€“ Floating Bottom Left -->
  <div id="installBubble" style="display:none;">
    <img src="https://cdn-icons-png.flaticon.com/512/992/992651.png" />
    Install App
  </div>


  <footer class="footer-bar">
    Â© 2026 Happy New Year â€” Created by Developer(All-Time-Online) <br>
    This project is created for fun and learning purposes. Feel free to share and spread the joy!
  </footer>


  <div id="countdownOverlay" class="countdown-overlay" style="display:none;"></div>

  <audio id="bgMusic" src="assets/newyear2026.mp3" loop></audio>

  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <!-- Fireworks 2.0 -->
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@3/tsparticles.bundle.min.js"></script>


  <script src="celebrate.js"></script>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js').catch(e => console.warn('SW register failed', e));
    }
  </script>
  <script>
    let keyBuffer = "";

    document.addEventListener("keydown", (e) => {
      keyBuffer += e.key.toLowerCase();

      // If admin secret code is typed
      if (keyBuffer.includes("admin")) {
        window.location.href = "admin.html";
      }

      // reset buffer every 10 characters 
      if (keyBuffer.length > 10) keyBuffer = "";
    });
  </script>

  <script>
    // ===========================
    // LONG PRESS ADMIN ACCESS
    // ===========================
    let pressTimer = null;

    function startPress(event) {
      pressTimer = setTimeout(() => {
        window.location.href = "admin.html";
      }, 4000); // 4 seconds
    }

    function endPress() {
      clearTimeout(pressTimer);
    }

    document.addEventListener("DOMContentLoaded", () => {
      const logo = document.querySelector(".logo-text");
      if (!logo) return;

      // Mobile touch
      logo.addEventListener("touchstart", startPress);
      logo.addEventListener("touchend", endPress);

      // Desktop mouse
      logo.addEventListener("mousedown", startPress);
      logo.addEventListener("mouseup", endPress);
      logo.addEventListener("mouseleave", endPress);
    });
  </script>
  <script>
    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      window.deferredPrompt = e;

      // Optional: Add a button UI later for â€œInstall Appâ€
      console.log("PWA install available");
    });
  </script>


</body>

</html>