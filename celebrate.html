<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your New Year 2026 Gift</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0a0530" />
  <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="celebrate-body">
  <div id="loader" class="loader-overlay">
    <div class="loader-inner">
      <div class="loader-ring"></div>
      <div class="loader-text">Loading your New Year giftâ€¦</div>
    </div>
  </div>

  <canvas id="celebrateCanvas"></canvas>
  <div class="overlay"></div>

  <header class="top-bar">
    <div class="logo-text" id="brandTitle">HAPPY NEW YEAR 2026</div>
    <a href="create.html" class="top-link">Create Your Own</a>
  </header>

  <main class="container one-column">
    <section class="card celebration-card">
      <div class="celebration-content">
        <h2 id="headline" class="neon-title">Happy New Year 2026!</h2>
        <h3 id="senderLine" class="neon-subtitle"></h3>

        <div class="gift-wrapper">
          <div class="gift-box" id="giftBox">
            <div class="gift-lid"></div>
            <div class="gift-body"></div>
            <div class="gift-ribbon-vertical"></div>
            <div class="gift-ribbon-horizontal"></div>
            <span class="gift-text" id="giftText">Tap to Open</span>
          </div>
        </div>

        <div class="balloon-area" id="balloonArea"></div>

        <div id="revealBlock" class="reveal-block" style="opacity:0; pointer-events:none; transform: translateY(20px);">
          <div class="photo-badge-wrapper">
            <div class="photo-circle" id="photoCircle">
              <img id="friendPhotoDisplay" alt="Friend Photo" style="display:none;" />
              <div class="photo-fallback" id="photoFallback" style="display:none;">ğŸ‰</div>
            </div>
          </div>
          <h3 id="receiverNameTitle" class="receiver-name"></h3>
          <p id="wishText" class="wish-text"></p>
        </div>

        <div class="after-gift-actions" id="afterGiftActions" style="opacity:0; pointer-events:none;">
          <button class="btn primary" id="shareForwardBtn">
            ğŸ Create a Gift for Someone Else
          </button>
        </div>
      </div>
    </section>
  </main>

  <div id="countdownOverlay" class="countdown-overlay" style="display:none;"></div>

  <audio id="bgMusic" src="assets/newyear2026.mp3" loop></audio>

  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

  <script src="celebrate.js"></script>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js').catch(e => console.warn('SW register failed', e));
    }
  </script>
  <script>
let keyBuffer = "";

document.addEventListener("keydown", (e) => {
    keyBuffer += e.key.toLowerCase();

    // If admin secret code is typed
    if (keyBuffer.includes("admin")) {
        window.location.href = "admin.html";
    }

    // reset buffer every 10 characters 
    if (keyBuffer.length > 10) keyBuffer = "";
});
</script>

</body>
</html>
