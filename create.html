<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Create New Year 2026 Gift</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0a0530" />
  <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32.png" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

</head>

<body class="create-body">
  <header class="top-bar">
    <div class="logo-text">Create Your New Year 2026 Gift</div>
    <a href="celebrate.html" class="top-link">Have a Code?</a>
  </header>

  <main class="container two-column">
    <section class="card create-card">
      <h1>Create a Celebration Link</h1>
      <p class="helper-text">
        Fill this form and send a magical Happy New Year 2026 celebration link to your friend.
      </p>

      <div class="form-group">
        <label for="senderName">Your Name</label>
        <input type="text" id="senderName" placeholder="e.g., Bhaskar" autocomplete="name" />
      </div>

      <div class="form-group">
        <label for="friendName">Friend‚Äôs Name</label>
        <input type="text" id="friendName" placeholder="e.g., Dip" />
      </div>

      <div class="form-group">
        <label for="customMessage">Optional Custom Wish</label>
        <textarea id="customMessage" rows="3" placeholder="Write a special New Year message..."></textarea>
      </div>

      <div class="form-group">
        <label for="photo">Friend‚Äôs Photo (optional)</label>
        <input type="file" id="photo" accept="image/*" />
        <small style="color:#888;">Photo is optional. If skipped, a festive emoji will appear instead.</small>
      </div>

      <label class="input-label">Choose Template</label>
      <select id="templateSelect" class="input" style="color:rgb(2, 22, 244);">
        <option value="default">Default</option>
        <option value="love">Love Theme</option>
        <option value="friendship">Friendship Theme</option>
        <option value="family">Family Theme</option>
        <option value="professional">Professional Theme</option>
        <option value="neon">Neon Theme</option>
      </select>
      <label class="input-label">Select Music</label>
      <select id="musicSelect" class="input" style="color:rgb(244, 2, 201);">
        <option value="default">Default Music</option>
        <option value="happy">Happy Celebration</option>
        <option value="romantic">Romantic Soft</option>
        <option value="party">DJ Party Mix</option>
        <option value="none">No Music</option>
      </select>



      <button id="generateBtn" class="btn primary full-width">
        üéÅ Generate Celebration Link
      </button>

      <div id="status" class="status-text"></div>

      <div id="linkResult" class="result-block" style="display: none;">
        <h3>Your Shareable Link</h3>
        <p>Copy and send this to your friend:</p>
        <p id="resultLink" class="link-display"></p>
        <div style="margin-top:8px; display:flex; gap:8px;">
          <button id="copyLinkBtn" class="btn">Copy Link</button>
          <button id="openLinkBtn" class="btn">Open Link to View</button>
        </div>
        <p>Share With...</p>
        <div id="shareButtons" style="margin-top:18px; display:flex; gap:8px; flex-wrap:wrap;">
          <button class="btn" id="shareWhatsapp" style="color: rgb(82, 237, 5);">WhatsApp</button>
          <button class="btn" id="shareTelegram" style="color: rgb(2, 224, 244);">Telegram</button>
          <button class="btn" id="shareFacebook" style="color: rgb(5, 94, 237);">Facebook</button>
        </div>
        <div id="qrSection" style="margin-top:12px; display:none; text-align:center;">
          <h3>Your QR Code</h3>
          <div id="qrcode" style="padding:10px; background:#fff; border-radius:12px; display:inline-block;"></div>
          <br><br>
          <button id="downloadQR" class="btn">Download QR</button>
        </div>


      </div>
    </section>

    <section class="card info-card">
      <h2>How it Works</h2>
      <ol class="info-list" style="margin-left: 20px; line-height: 1.6; color: #ddd;">
        <li>Enter your name, your friend‚Äôs name, and an optional wish.</li>
        <li>Optionally upload your friend‚Äôs photo.</li>
        <li>Click ‚ÄúGenerate Celebration Link‚Äù.</li>
        <li>Share the link via WhatsApp or Instagram.</li>
        <li>When your friend opens it, they see a gift box. On opening ‚Üí full celebration!</li>
      </ol>
    </section>
  </main>

  <section class="card" id="leaderboard-card">
    <h3>üèÜ Global Leaderboard</h3>
    <ul id="leaderboard-list" style="list-style:none; padding:0; margin:10px 0 0 0;"></ul>
    <div id="your-rank"></div>
  </section>

  <footer class="footer-bar">
    ¬© 2026 Happy New Year ‚Äî Created by Bhaskar Charan
  </footer>



  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script src="create.js"></script>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js').catch(e => console.warn('SW register failed', e));
    }
  </script>
  <script>
    let keyBuffer = "";

    document.addEventListener("keydown", (e) => {
      keyBuffer += e.key.toLowerCase();

      // If admin secret code is typed
      if (keyBuffer.includes("admin")) {
        window.location.href = "admin.html";
      }

      // reset buffer every 10 characters 
      if (keyBuffer.length > 10) keyBuffer = "";
    });
  </script>

  <script>
    // ===========================
    // LONG PRESS ADMIN ACCESS
    // ===========================
    let pressTimer = null;

    function startPress(event) {
      pressTimer = setTimeout(() => {
        window.location.href = "admin.html";
      }, 4000); // 4 seconds
    }

    function endPress() {
      clearTimeout(pressTimer);
    }

    document.addEventListener("DOMContentLoaded", () => {
      const logo = document.querySelector(".logo-text");
      if (!logo) return;

      // Mobile touch
      logo.addEventListener("touchstart", startPress);
      logo.addEventListener("touchend", endPress);

      // Desktop mouse
      logo.addEventListener("mousedown", startPress);
      logo.addEventListener("mouseup", endPress);
      logo.addEventListener("mouseleave", endPress);
    });
  </script>

</body>

</html>