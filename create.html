<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Create New Year 2026 Gift</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0a0530" />
  <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="create-body">
  <header class="top-bar">
    <div class="logo-text">Create Your New Year 2026 Gift</div>
    <a href="celebrate.html" class="top-link">Have a Code?</a>
  </header>

  <main class="container two-column">
    <section class="card create-card">
      <h1>Create a Celebration Link</h1>
      <p class="helper-text">
        Fill this form and send a magical Happy New Year 2026 celebration link to your friend.
      </p>

      <div class="form-group">
        <label for="senderName">Your Name</label>
        <input type="text" id="senderName" placeholder="e.g., Bhaskar" autocomplete="name" />
      </div>

      <div class="form-group">
        <label for="friendName">Friend‚Äôs Name</label>
        <input type="text" id="friendName" placeholder="e.g., Dip" />
      </div>

      <div class="form-group">
        <label for="customMessage">Optional Custom Wish</label>
        <textarea id="customMessage" rows="3" placeholder="Write a special New Year message..."></textarea>
      </div>

      <div class="form-group">
        <label for="photo">Friend‚Äôs Photo (optional)</label>
        <input type="file" id="photo" accept="image/*" />
        <small style="color:#888;">Photo is optional. If skipped, a festive emoji will appear instead.</small>
      </div>

      <button id="generateBtn" class="btn primary full-width">
        üéÅ Generate Celebration Link
      </button>

      <div id="status" class="status-text"></div>

      <div id="linkResult" class="result-block" style="display: none;">
        <h3>Your Shareable Link</h3>
        <p>Copy and send this to your friend:</p>
        <p id="resultLink" class="link-display"></p>
        <div style="margin-top:8px; display:flex; gap:8px;">
          <button id="copyLinkBtn" class="btn">Copy Link</button>
          <button id="openLinkBtn" class="btn">Open Link</button>
        </div>
      </div>
    </section>

    <section class="card info-card">
      <h2>How it Works</h2>
      <ol class="info-list" style="margin-left: 20px; line-height: 1.6; color: #ddd;">
        <li>Enter your name, your friend‚Äôs name, and an optional wish.</li>
        <li>Optionally upload your friend‚Äôs photo.</li>
        <li>Click ‚ÄúGenerate Celebration Link‚Äù.</li>
        <li>Share the link via WhatsApp or Instagram.</li>
        <li>When your friend opens it, they see a gift box. On opening ‚Üí full celebration!</li>
      </ol>
    </section>
  </main>

  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script src="create.js"></script>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js').catch(e => console.warn('SW register failed', e));
    }
  </script>
  <script>
let keyBuffer = "";

document.addEventListener("keydown", (e) => {
    keyBuffer += e.key.toLowerCase();

    // If admin secret code is typed
    if (keyBuffer.includes("admin")) {
        window.location.href = "admin.html";
    }

    // reset buffer every 10 characters 
    if (keyBuffer.length > 10) keyBuffer = "";
});
</script>

</body>
</html>
